以下では基本的な回帰分析の方法について説明しています。

### 単回帰分析

単回帰分析は以下のコマンドで行えます。使用しているデータセットは3章のもの同様です。以下のコマンドではコマンドの最後に`r`が入っていますが，これは頑健性のある標準誤差(Heteroskedasticity-robust standard errors)を使用するためで，これがないと均一分散のもとでの標準誤差を使用します。

コマンド：
```
* 被説明変数はsalary, 説明変数がroe
* regはregressを略したもの。regressとしてもよい。
* 最後のrはrobustを省略したもの。robustとしてもよい。
* reg 説明変数　被説明変数　の順で書く。

reg salary roe, r
```

結果：
```
. reg salary roe, r

Linear regression                               Number of obs     =        209
                                                F(1, 207)         =       7.34
                                                Prob > F          =     0.0073
                                                R-squared         =     0.0132
                                                Root MSE          =     1366.6

------------------------------------------------------------------------------
             |               Robust
      salary |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         roe |   18.50119   6.829448     2.71   0.007     5.036994    31.96538
       _cons |   963.1913   121.1062     7.95   0.000     724.4316    1201.951
------------------------------------------------------------------------------
```

### 重回帰分析

重回帰分析についても基本的には単回帰分析と同じです。

コマンド：
```
* reg 被説明変数 1つ目の説明変数 2つ目の説明変数　..., r のよう書く
reg salary roe ros, r
```

結果：
```
. reg salary roe ros, r

Linear regression                               Number of obs     =        209
                                                F(2, 206)         =       4.37
                                                Prob > F          =     0.0138
                                                R-squared         =     0.0178
                                                Root MSE          =     1366.7

------------------------------------------------------------------------------
             |               Robust
      salary |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         roe |   21.62757   7.409501     2.92   0.004     7.019396    36.23575
         ros |    -1.4209   .9266429    -1.53   0.127     -3.24782    .4060199
       _cons |   997.2839   131.5177     7.58   0.000     737.9907    1256.577
------------------------------------------------------------------------------
```

### 残差を出力する

回帰分析の残差を出力するためには`predict`コマンドと`residuals`オプションを利用します。

```
reg salary roe, r
predict uhat1, residuals
reg salary roe ros, r
predict uhat2, residuals
```

上のコマンドでは1つ目の回帰分析の残差を`uhat1`に保存し，`uhat2`には2つ目の回帰分析の結果を保存しています。この4行をまとめて実行することで2つの回帰分析の残差がデータに保存され，データを見ると元からある変数に加えて`uhat1`と`uhat2`が追加されていることがわかります。